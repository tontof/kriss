#+OPTIONS:    toc:2 author:nil creator:nil
#+STARTUP:    align
#+TITLE:      KrISS dwld
#+AUTHOR:     Tontof
#+LANGUAGE:   en
#+STYLE:      <style type="text/css"></style>
#+LINK_UP:    ..
#+LINK_HOME:  ..
#+EXPORT_EXCLUDE_TAGS: noexport
#+STYLE: <link rel="stylesheet" type="text/css" href="../inc/style.css" />

KrISS dwld is a simple and smart (or stupid) downloader bookmarklet.

Feel free to contribute: https://github.com/tontof/kriss_dwld

* KrISS dwld bookmarklet
#+HTML:<div id="instructions">Drag the browser button link into your Bookmarks Toolbar:</div>
#+HTML:<a onclick="alert(document.getElementById('instructions').firstChild.nodeValue);return false;" href="javascript:(function(){var e=document.createElement('script');e.src='//tontof.net/kriss/dwld/script.js';document.body.appendChild(e);})();">KrISS dwld</a>

This bookmarklet loads the script located at http://tontof.net/kriss/dwld/script.js

It is based on 2 Grease Monkey scripts :
- http://userscripts.org/scripts/review/25105 (Licence MIT) for Youtube
- http://userscripts.org/scripts/review/130917 (GPL3) for other websites (Dailymotion, Vimeo, Veoh, etc.)

Bookmarklet is very convenient because you do not need to install
extension as GreaseMonkey or program and you will always be
up-to-date. However KrISS dwld rely on http://tontof.net as it needs
some tricks for Youtube that are not possible using only
javascript. Hopefully, you can install it easily on your server as
everything is available on https://github.com/tontof/kriss_dwld

* Independant bookmarklets
Following bookmarklet(s) do not rely on http://tontof.net and are
recommended when possible.
** Youtube
This bookmarklet does not work with commercial videos:
#+HTML:<a onclick="alert(document.getElementById('instructions').firstChild.nodeValue);return false;" href="javascript:(function(){if(window.location.href.indexOf('/embed/')!==-1)window.location.assign(window.location.href.replace('/embed/','/watch?v='));else{var%20a=0,b={5:'FLV%20240p',18:'MP4%20360p',22:'MP4%20720p%20(HD)',34:'FLV%20360p',35:'FLV%20480p',37:'MP4%201080p%20(HD)',38:'MP4%204K%20(HD)',43:'WebM%20360p',44:'WebM%20480p',45:'WebM%20720p%20(HD)',46:'WebM%201080p%20(HD)'},c=document.getElementById('movie_player')||document.getElementById('movie_player-flash'),d=[],e,f={};if(c){d=c.getAttribute('flashvars').split('&');for(a=0;a<d.length;a++)f[d[a].split('=')[0]]=d[a].split('=')[1];e=decodeURIComponent(f.url_encoded_fmt_stream_map)}else%20if(typeof%20yt!='undefined'&&yt.playerConfig)e=yt.playerConfig.args.url_encoded_fmt_stream_map;else%20return;var%20g={},h=e.split(',');for(a=0;a<h.length;a++){var%20i=h[a].split('&'),j={};for(var%20k=0;k<i.length;k++){var%20l=i[k].split('=');l.length===2&&(j[l[0]]=l[1])}var%20m=j.url?j.url:null;if(m===null)continue;var%20n=j.itag?j.itag:null;if(n===null)continue;var%20o=j.sig?j.sig:null;o!==null&&(j.url=decodeURIComponent(m)+'&signature='+o),j.type=decodeURIComponent(j.type),m.toLowerCase().indexOf('http')===0&&(g[n]=j)}var%20p='',q=[];for(var%20r%20in%20g)b[r]&&(q.push(r),p+=q.length+'%20%E2%86%92%20'+b[r]+'\n');var%20s=parseInt(window.prompt(p),10)-1;s<q.length&&window.location.assign(g[q[s]].url)}})();">Youtube</a>

* Alternatives
** Youtube-dl
Command line using python:
- http://rg3.github.io/youtube-dl/
** KeepVid
Needs java but also works with a bookmarklet:
- http://www.keepvid.com
